@charset "utf-8";
/*!
 * @copyright: https://github.com/divio/django-cms
 */

//##############################################################################
// IMPORT SETTINGS
@import "../../../../../sass/settings/all";
@import "../../../../../sass/mixins/all";
@import "../../../../../sass/mixins/all";

//##############################################################################
// IMPORT COMPONENTS
@import "../../../../../sass/components/iconography";

$pagetree-cell-height: 40px;
$pagetree-nesting-padding: 20px;

//##############################################################################
// RESET

// this level is required to make sure djangocms-admin-style or django-admin
// are not interfering (increasing specificity). This section only defines
// resets added through inline styles
.jstree-django-cms {
    * {
        box-sizing: border-box;
    }
    // parent and children ul
    .jstree-container-ul,
    .jstree-children,
    // children and childrens children li
    .jstree-leaf,
    .jstree-node  {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    // grid settings and resets added by `jstree.grid.js`
    .jstree-grid-header,
    .jstree-grid-separator {
        padding: 0;
        margin: 0;
        // there are inline styles set to this part
        margin-left: 0 !important;
        border: none;
        background: none;
    }
    &.jstree-grid-cell {
        padding: 0;
    }

    // tooltips are hidden if overflow is prevented
    &.jstree-grid-wrapper,
    .jstree-grid-column,
    .jstree-grid-cell {
        box-sizing: border-box;
        overflow: visible;
    }
}

//###########################################################
// DJANGO-CMS THEME

// general wrapper
.cms-pagetree-container {
    border: 1px solid $gray-lighter;
}
.jstree-grid-wrapper {
    padding-bottom: 5px !important;
    border-left: 1px solid $white;
    border-bottom: 1px solid $white;
    background: $gray-lightest;
}

// specificity required for admin styles and jstree resets
.jstree-django-cms {
    // header column
    .jstree-grid-header {
        font-size: $font-size-small;
        font-color: $gray;
        text-align: center;
        padding: 3px 5px;
        border-bottom: 1px solid $gray-lighter;
        background: $white;
    }
    // ensure first line is not centered
    .jstree-grid-column-0 .jstree-grid-header {
        text-align: left !important;
    }

    //###########################################################
    // styles for nesting elements
    .jstree-container-ul {
        margin-left: $pagetree-nesting-padding;
    }
    .jstree-children {
        margin-left: $pagetree-nesting-padding;
    }
    .jstree-open > .jstree-ocl,
    .jstree-closed > .jstree-ocl {
        cursor: pointer;
        float: left;
        position: relative;
        left: -16px;
        font-size: 12px;
        color: $gray-light;
        padding: 14px 0;
        @extend %icon;
    }
    .jstree-open > .jstree-ocl {
        @include icon(minus-square-o);
        color: $gray;
    }
    .jstree-closed > .jstree-ocl {
        @include icon(plus-square-o);
    }

    //###########################################################
    // background color and paddings for nodes
    // first row styling
    .jstree-anchor {
        display: block;
        cursor: move;
        outline: none;
        color: $gray;
        // we need to add one pixel in to negate the negative margin
        // value to get the borders to work visually
        height: $pagetree-cell-height + 1;
        padding: 9px 25px;
        margin-top: -1px;
        border: 1px solid $gray-lighter;
        border-right: none;
        background: $white url('../../../img/pagetree/tree-li-drag.gif') no-repeat left center;

        &:hover {
            color: $gray !important;
        }
    }
    // style cells afterwards
    .jstree-grid-cell {
        height: $pagetree-cell-height;
        border-bottom: 1px solid $gray-lighter;
        background: $white;
        // don't apply these styles for the first column
        &.jstree-django-cms {
            height: auto;
            border: none;
            background: none;
        }
    }
    // hover states
    .jstree-hovered,
    .jstree-clicked {
        background-color: $gray-lightest;
    }
}
