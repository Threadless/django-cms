!function(){function t(t){var o=function(){};return o.prototype=t.prototype||t,new o}function o(t,o,e){if(e){var n={};for(var i in t)i!==o&&(n[i]=t[i])}else delete t[o];return n||t}function e(o,n,i){if(!o||!n)return o||n||{};o=t(o),n=t(n);for(var r in n)"[object Object]"===Object.prototype.toString.call(n[r])?e(o[r],n[r]):o[r]=i&&o[r]?o[r]:n[r];return o}function n(t){for(var i={},r=0;r<t.length;r++){"function"==typeof t[r]&&(t[r]=t[r].prototype);var s=o(t[r],"initialize",!0);i=s.implement?n(s.implement):e(i,s)}return i}var i="1.0",r=window.Class,s=window.Class=function(i){i=i||{};var r=function(){return this.initialize?this.initialize.apply(this,arguments):a};if(i.implement){var a=window===this?t(r.prototype):this,c=i.implement;o(i,"implement"),i=e(i,n(c))}r.prototype=t(i),r.constructor=r,r._parent=t(i);for(var u=0,l=["extend","implement","getOptions","setOptions"];u<l.length;u++)r[l[u]]=s[l[u]];return r};s.extend=function(t){var i=this;t.implement&&(this.prototype=e(this.prototype,n(t.implement)),o(t,"implement"));for(var r in t)t[r]="function"==typeof t[r]&&/parent/.test(t[r].toString())?function(t,o){return function(){return this.parent=i._parent[o],t.apply(this,arguments)}}(t[r],r):t[r];return this._parent=e(this._parent,t,!0),this.prototype=e(this.prototype,t),this},s.implement=function(t){return this.prototype=e(this.prototype,n(t))},s.getOptions=function(){return this.prototype.options||{}},s.setOptions=function(t){return this.prototype.options=e(this.prototype.options,t)},s.noConflict=function(){return window.Class=r,s},s.version=i}(),window.django=window.django||void 0,window.jQuery=window.django&&window.django.jQuery?window.django.jQuery:window.jQuery||void 0,window.Class=window.Class||void 0;var CMS={$:"function"==typeof window.jQuery?window.jQuery:void 0,Class:"function"==typeof window.Class?window.Class:void 0,API:{}};!function(t){"use strict";t(document).ready(function(){CMS.API.Helpers={reloadBrowser:function(o,e,n){var i=this,r=window.parent?window.parent:window;return n?(r.CMS.API.locked=!0,t.ajax({async:!1,type:"GET",url:r.CMS.config.request.url,data:{model:r.CMS.config.request.model,pk:r.CMS.config.request.pk},success:function(t){return r.CMS.API.locked=!1,""!==t||o?void(r.location.pathname!==t?i.reloadBrowser(t):"REFRESH_PAGE"===o?i.reloadBrowser():o&&i.reloadBrowser(o)):!1}}),!1):void r.setTimeout(function(){o&&o!==r.location.href?r.location.href=o:r.location.reload()},e||0)},preventSubmit:function(){var o=t("#cms-toolbar").find("form");o.submit(function(){CMS.API.Toolbar._loader(!0),t('input[type="submit"]').bind("click",function(t){t.preventDefault()}).css("opacity",.5)})},csrf:function(o){t.ajaxSetup({beforeSend:function(t){t.setRequestHeader("X-CSRFToken",o)}})},showTooltip:function(o,e){var n=t(".cms-tooltip");n.css("visibility","visible").data("plugin_id",e||null).show().find("span").html(o),t("body").bind("mousemove.cms",function(o){var e=20,i=o.pageX-t(n).offsetParent().offset().left,r=o.pageY-t(n).offsetParent().offset().top,s=t(n).offsetParent().width(),a=i+n.outerWidth(!0)+e;n.css({left:a>=s?i-n.outerWidth(!0)-e:i+e,top:r-12})}),n.bind("touchstart.cms",function(){t(".cms-plugin-"+t(this).data("plugin_id")).trigger("dblclick")})},hideTooltip:function(){var o=t(".cms-tooltip");o.css("visibility","hidden").hide(),t("body").unbind("mousemove.cms"),o.unbind("touchstart.cms")},setSettings:function(o){var e=this;return o=JSON.stringify(t.extend({},CMS.config.settings,o)),CMS.API.Toolbar&&CMS.API.Toolbar._loader(!0),window.localStorage?(localStorage.setItem("cms_cookie",o),CMS.API.Toolbar&&CMS.API.Toolbar._loader(!1)):(CMS.API.locked=!0,t.ajax({async:!1,type:"POST",url:CMS.config.urls.settings,data:{csrfmiddlewaretoken:this.config.csrf,settings:o},success:function(t){CMS.API.locked=!1,o=t?JSON.parse(t):CMS.config.settings,CMS.API.Toolbar&&CMS.API.Toolbar._loader(!1)},error:function(t){e.showError(t.response+" | "+t.status+" "+t.statusText)}})),CMS.settings=JSON.parse(o),CMS.settings},getSettings:function(){var o,e=this;return CMS.API.Toolbar&&CMS.API.Toolbar._loader(!0),window.localStorage?(o=JSON.parse(localStorage.getItem("cms_cookie")),CMS.API.Toolbar&&CMS.API.Toolbar._loader(!1)):(CMS.API.locked=!0,t.ajax({async:!1,type:"GET",url:CMS.config.urls.settings,success:function(t){CMS.API.locked=!1,o=t?JSON.parse(t):CMS.config.settings,CMS.API.Toolbar&&CMS.API.Toolbar._loader(!1)},error:function(t){e.showError(t.response+" | "+t.status+" "+t.statusText)}})),o||(o=this.setSettings(CMS.config.settings)),CMS.settings=o,CMS.settings}},CMS.API.Helpers.preventSubmit()})}(CMS.$);