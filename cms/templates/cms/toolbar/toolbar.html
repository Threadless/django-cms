{% load i18n adminmedia %}
<script type="text/javascript" src="{% admin_media_prefix %}js/jquery.min.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/libs/classy-1.3.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/plugins/jquery.cookie.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/plugins/jquery.ui.core.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/plugins/jquery.ui.draggable.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/plugins/jquery.ui.droppable.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/plugins/cms.base.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/plugins/cms.toolbar.js"></script>
<script type="text/javascript" src="{{ CMS_MEDIA_URL }}js/plugins/cms.placeholders.js"></script>
<script type="text/javascript">
//<![CDATA[
jQuery(document).ready(function ($) {
	// load css file
	$('<link>').appendTo('head').attr({
		rel: 'stylesheet', type: 'text/css',
		href: '{{ CMS_MEDIA_URL }}css/plugins/cms.toolbar.css'
	});
	$('<link>').appendTo('head').attr({
		rel: 'stylesheet', type: 'text/css',
		href: '{{ CMS_MEDIA_URL }}css/plugins/cms.placeholders.css'
	});
	
	// invoke helpers method for toolbar
	CMS.Helpers = new CMS.Helpers();
	
	// initialize toolbar and pass options and items
	CMS.Toolbar = new CMS.Toolbar('#cms_toolbar', {{ CMS_TOOLBAR_CONFIG|safe }});

	// initialize placeholders and pass options
	CMS.Placeholders = new CMS.Placeholders('#cms_toolbar', {
		{% if edit %}edit_mode: true,{% endif %}
		{% if compact %}compact_mode: true,{% endif %}
		{% if page %}page_is_defined: true,{% endif %}
		data: '{{ placeholder_data }}', /* data will be required to check if this plugin is allowed to be moved to the desired placeholder */
		urls: {
			cms_page_move_plugin: '{% url admin:cms_page_move_plugin %}',
			cms_page_changelist: '{% url admin:cms_page_changelist %}',              
			cms_page_change_template: '{% if page %}{% url admin:cms_page_change_template page.pk %}{% else %}null{% endif %}',
			cms_page_add_plugin: '{% url admin:cms_page_add_plugin %}',
			cms_page_remove_plugin: '{% url admin:cms_page_remove_plugin %}'
		},
		lang: {
			move_slot: "{% trans 'Move to %(name)s' %}",
			move_warning: "{% trans 'The selected element can not be moved to the desired location.' %}",
			delete_request: "{% trans 'Are you sure you want to delete this plugin?' %}"
		}
	});
	
	// initialize security patch
	CMS.Security = new CMS.Security();
	CMS.Security.csrf();
});
//]]>
</script>

<div id="cms_toolbar" class="cms_reset" style="display:none;">
	<!-- start: toolbar -->
	<div class="cms_toolbar">
		<div id="cms_toolbar-toggle">
			<a href="#" class="cms_toolbar-btn cms_toolbar-btn_left">
				<span class="cms_toolbar-btn_right cms_toolbar_icon-toggle">
					<span class="cms_toolbar_icon">&nbsp;</span>
					<span class="cms_toolbar_icon-hide">{% trans "Show/Hide toolbar" %}</span>
				</span>
			</a>
		</div>
		<div id="cms_toolbar-toolbar">
			<div class="cms_toolbar-left"></div>
			<div class="cms_toolbar-right"></div>
		</div>
	</div>
	<!-- end: toolbar -->

	<!-- placeholder dimmer, loader and overlay -->
	<div id="cms_placeholder-dim"></div>
	<div id="cms_placeholder-content"><div class="cms_placeholder-content_inner cms_placeholder-content_loader"></div></div>
	<div id="cms_placeholder-overlay">
		<ul class="cms_placeholder-options">
			<li><a href="#" rel="drag">drag</a></li>
			<li><a href="#" rel="edit">edit</a></li>
			<li><a href="#" rel="moveup">up</a></li>
			<li><a href="#" rel="movedown">down</a></li>
			<li><a href="#" rel="settings">delete</a></li>
		</ul>
		<div class="cms_placeholder-overlay_bg"></div>
	</div>
	
	<!-- template: anchor -->
	{% include "cms/toolbar/items/anchor.html" %}
	
	<!-- template: switcher -->
	{% include "cms/toolbar/items/switcher.html" %}
	
	<!-- template: button -->
	{% include "cms/toolbar/items/button.html" %}
	
	<!-- template: list -->
	{% include "cms/toolbar/items/list.html" %}
	
	<!-- item: html - login -->
	{% include "cms/toolbar/items/login.html" %}
</div>