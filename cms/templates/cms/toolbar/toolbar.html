{% load i18n l10n %}

{% language request.toolbar.toolbar_language %}
<div id="cms_toolbar" class="cms_reset{% if not user.is_authenticated %} cms_toolbar-auth{% endif %}{% if debug %} cms_toolbar-debug{% endif %}">

	{# debug, tooltip #}
	<div class="cms_debug-bar"></div>
	<div class="cms_tooltip">{% trans "Double-click to edit" %}<span></span></div>

	{# start: toolbar #}
	<div class="cms_toolbar">
		<div class="cms_toolbar-left">
			{% include "cms/toolbar/items/logo.html" %}

			{% if not user.is_authenticated %}
			{% include "cms/toolbar/items/login.html" %}
			{% else %}
			<ul class="cms_toolbar-item cms_toolbar-item-navigation">
				{% for item in request.toolbar.get_left_items %}
					{{ item.render }}
				{% endfor %}
			</ul>
			{% endif %}
		</div>

		<div class="cms_toolbar-right">
			{% for item in request.toolbar.get_right_items %}
				{{ item.render }}
			{% endfor %}
			{% if request.toolbar.can_change %}
			<div class="cms_toolbar-item cms_toolbar-item_switch{% if not request.toolbar.edit_mode %} cms_toolbar-item_switch-active{% endif %}">
				<a href="{% if request.toolbar.edit_mode %}?edit_off{% else %}?edit{% endif %}">
					<span class="cms_toolbar-item_switch-on">{% trans "Live" %}</span>
					<span class="cms_toolbar-item_switch-off">{% trans "Draft" %}</span>
				</a>
				<span class="cms_toolbar-item_switch-knob">{% trans "Change" %}</span>
			</div>
			{% endif %}
		</div>
	</div>
	<div class="cms_toolbar-trigger"><a href="#">{% trans "Toggle toolbar" %}</a></div>
	{# end: toolbar #}

	{# start: messages #}
	<div class="cms_messages">
		<div class="cms_messages-close"></div>
		<div class="cms_messages-inner"></div>
	</div>
	{# end: messages #}

	{# start: sidebar #}
	<div class="cms_sideframe">
		<div class="cms_sideframe-resize"><span class="cms_sideframe-knob"></span></div>
		<div class="cms_sideframe-frame"></div>
		<div class="cms_sideframe-shim"></div>
		<div class="cms_sideframe-btn">
			<div class="cms_sideframe-close"></div>
			<div class="cms_sideframe-hide"></div>
			<div class="cms_sideframe-maximize"></div>
		</div>
		<div class="cms_sideframe-copy"></div>
	</div>
	{# end: sidebar #}

	{# start: clipboard #}
	{% if request.toolbar.edit_mode or request.toolbar.build_mode %}
	{% if request.toolbar.get_clipboard_plugins %}
	{% with slot="clipbaord" %}
	<div class="cms_clipboard">
		<div class="cms_clipboard-triggers">
			{# maximum of 5, delete link #}
			{% for plugin in request.toolbar.get_clipboard_plugins %}
				{% if not plugin.parent_id %}
				<div class="cms_clipboard-numbers"><a href="#">{{ forloop.index }}</a></div>
				{% endif %}
			{% endfor %}
		</div>
		{% for plugin in request.toolbar.get_clipboard_plugins %}
		<div class="cms_plugins">{% include "cms/toolbar/plugin.html" with instance=plugin %}</div>
		{% endfor %}
		<div class="cms_clipboard-containers cms_draggables">
			{% for plugin in request.toolbar.get_clipboard_plugins %}
				{% if forloop.counter <= 5 %}
				{% with show_language="true" %}{% include "cms/toolbar/dragitem_item.html" with plugin=plugin %}{% endwith %}
				{% endif %}
			{% endfor %}
		</div>
		<p class="cms_clipboard-empty"><a href="{% url "admin:cms_page_clear_placeholder" request.toolbar.clipboard.pk %}" data-post='{"csrfmiddlewaretoken": "{{ csrf_token }}"}'>{% trans "Empty Clipboard" %}</a></p>
	</div>
	{% endwith %}
	{% endif %}
	{% endif %}
	{# end: clipboard #}

	{# start: modal #}
	<div class="cms_modal">
		<div class="cms_modal-head">
			<span class="cms_modal-title">&nbsp;</span>
			<span class="cms_modal-collapse" title="minimize">-</span>
			<span class="cms_modal-maximize" title="maximize">+</span>
			<span class="cms_modal-close" title="close">x</span>
		</div>
		<div class="cms_modal-body">
			<div class="cms_modal-shim"></div>
			<div class="cms_modal-frame"></div>
		</div>
		<div class="cms_modal-foot">
			<div class="cms_modal-breadcrumb">
				<span class="cms_modal-breadcrumb-title">{% trans "Start" %}</span>
				<span class="cms_modal-breadcrumb-items">&nbsp;</span>
			</div>
			<div class="cms_modal-buttons"></div>
			<div class="cms_modal-resize"></div>
		</div>
	</div>
	{# end: modal #}

	{# start: structure #}
	<div class="cms_structure">
		<div class="cms_structure-content">

			<div class="draggables">
				{% for placeholder in request.toolbar.placeholders.values %}
					{% with placeholder.slot as slot %}
					<div class="placeholder" id="{{ placeholder.pk }}">
					{% for plugin in placeholder.get_cached_plugins %}
						{% include "cms/toolbar/dragitem.html" with plugin=plugin %}
					{% endfor %}
					</div>
					{% endwith %}
				{% endfor %}
			</div>

		</div>
	</div>
	{# end: structure #}

</div>
{% endlanguage %}